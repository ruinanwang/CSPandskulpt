// Generated by CoffeeScript 1.12.4
(function() {
  window.pythy.typeaheadUser = function() {
    var typeahead_user_labels, typeahead_user_mapped;
    typeahead_user_labels = null;
    typeahead_user_mapped = null;
    return $('.typeahead-user').typeahead({
      source: function(query, process) {
        return $.getJSON('/typeaheads/user', {
          search: query
        }, function(data) {
          typeahead_user_labels = [];
          typeahead_user_mapped = {};
          $.each(data, function(i, item) {
            var label;
            label = item.first_name + ' ' + item.last_name + ' (' + item.email + ')';
            typeahead_user_mapped[label] = item.id;
            return typeahead_user_labels.push(label);
          });
          return process(typeahead_user_labels);
        });
      },
      updater: function(item) {
        $(this.$element[0]).siblings('input[type="hidden"]').val(typeahead_user_mapped[item]);
        return item;
      }
    });
  };

  $(function() {
    return window.pythy.typeaheadUser();
  });

}).call(this);
